<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Document</title>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="../style/Bui/Bui.css">
<link rel="stylesheet" type="text/css" href="../style/bcnc.css">
<script src='../js/B.js'></script>
<script>
function init() {
    window.tblProsps = new B.Table("tblProspects", "tblProsps", "pid,gnam,qcnt", "prospect");
    tblProsps.pairWithForm("dlgProsp", "AED", editProspect, null);
    tblProsps.setTableHeight(200);
    tblProsps.addRow("123456","Test Prospect",25);
    tblProsps.addRow("8723933","Example Large Group",1);

    window.tblMonths = new B.Table("tblMonths", "tblMonths", "effdat,quoted,rated,pending,enrolled");
    tblMonths.setTableHeight(160);
    tblMonths.preRowRender = function(rownum,tr,cells,rd) {
        cells.effdat.innerHTML = B.format.MYYYY(rd.effdat);
        if (new Date().getTime() > new Date(rd.effdat).getTime())  {
            cells.effdat.style.color = "brown";
        }
    }
    var today = new Date();
    today.setDate(1);
    var m = today.getMonth() - 1;
    today.setMonth(m);
    tblMonths.addRow(new Date(today.getTime()),"32","29","27","42");
    today.setMonth(++m);
    tblMonths.addRow(new Date(today.getTime()),"20","12","0","23");
    today.setMonth(++m);
    tblMonths.addRow(new Date(today.getTime()),"5","1","11","1");
    today.setMonth(++m);
    tblMonths.addRow(new Date(today.getTime()),"1","0","1","0");
    today.setMonth(++m);
    tblMonths.addRow(new Date(today.getTime()),"1","0","1","0");
    today.setMonth(++m);
    tblMonths.addRow(new Date(today.getTime()),"1","0","1","0");
    today.setMonth(++m);
    tblMonths.addRow(new Date(today.getTime()),"1","0","1","0");
    tblMonths.pickRow(1);
    tblMonths.onclick = function(td, tr, rd, cells, changed) {
        dropP.popup.items.itm2.disable(tr == null);
    }

    window.dropNav = new B.DropdownMenu("mnuDrop", "nav", null, "<b>BlueQuote Home</b>", 200);
    dropNav.popup.addItem("reva", function() { top.loadPage("reva/reva_home.html") }, "autorenew", "REVA Home");
    window.drop = new B.DropdownMenu("mnuDrop", "user", "person_outline", "User Profile", 200);
    drop.popup.addItem("edt", function() { say("You clicked Edit Profile menu item."); }, "edit", "Edit profile...");
    drop.popup.addItem("itm1", function() { say("You clicked menu item 1"); }, "email", "Send feedback...");
    drop.popup.addSpace();
    drop.popup.addItem("itm2", function() { sayE("You cannot change your password from here"); }, "security", "Change Password...");
    drop.popup.addItem("itm3", function() { say("Just close the window to log out."); }, "cancel", "Logout...");
    window.dropP = new B.DropdownMenu("mnuDrop", "mnu2", "business", "Prospect", 250);
    dropP.popup.addItem("srch", function() { searchProspect(); }, "search", "Search prospect...");
    dropP.popup.addItem("itm1", editProspect, "add_circle_outline", "Create new prospect...");
    dropP.popup.addItem("itm2", function() { say("You clicked the 2.2nd item"); }, "edit", "Edit prospect...");
    window.dropQ = new B.DropdownMenu("mnuDrop", "mnuQ", "chat_bubble_outline", "Quote", 200);
    dropQ.popup.addItem("add", function() { say("You clicked the Add Quote link"); }, "note_add", "Add Quote...");
    dropQ.popup.addItem("cpy", function() { say("You clicked the Copy Quote link"); }, "file_copy", "Copy Quote...");
    dropQ.popup.addItem("del", function() { say("You clicked the Delete Quote link"); }, "delete_outline", "Delete Quote...");
    dropQ.popup.addItem("prt", function() { say("You clicked the Print Quote link"); }, "print", "Print Quote...");
    
}
function pickNAICS() {
    sayE("Not coded yet");
}
function searchProspect() {
    var msg = "Search for ID, name, etc";
    var prompt = "Search";
    var deflt = "";
    var title = "Prospect Search"
    sayGet(msg, prompt, deflt, title, function(rslt) {
        sayE("Sorry, Search has not been coded yet.<br>If it had, it would be searching for: '" + rslt + "'.");
    })
}
function editProspect(frm, kind) {
    frm.set("phone", B.format.phone("919-368-8124x"));
    if (B.is.oneOf(kind, "EDIT,COPY")) {
        var rd = tblProsps.getDataRow();
        frm.set("grpnam", rd.gnam);
        if (kind == "EDIT") {
            B.Dialog.get("dlgProsp").setTitle("Prospect Details: #" + rd.pid);
        } else {
            B.Dialog.get("dlgProsp").setTitle("Copied Prospect Details");
        }
    } else {
        B.Dialog.get("dlgProsp").setTitle("New Prospect Details");
    }
}
</script>
</head>
<body onload='init()' style='padding:.4rem; padding-top:0'>
    <div id='mnuDrop' style='background-color: gainsboro'></div>
    <table class='centerme'>
        <tr>
        <td style='vertical-align:top; text-align:right; padding-right: 1em;'>
            <div style="max-width: 500px; z-index:0">
                <table id='tblMonths' style='width:420px'>
                    <tr><th data='effdat,,R'>Effective</th>
                        <th data='quoted,5.5em,R'>Quoted</th>
                        <th data='rated,5.5em,R'>Rated</th>
                        <!--<th data='pending,4.5em,R'>Ready</th>/-->
                        <th data='enrolled,calc(5.5em + 20px),R'>Enroll</th>
                    </tr>
                </table>
            </div>
        </td>
        <td style='vertical-align:top; text-align:left;'>
            <div style="max-width: 600px; z-index:0">
                <table id='tblProspects' style='width:550px'>
                    <tr><th data='pid,90px,R'>Prospect</th>
                        <th data='gnam,,L'>Group Name</th>
                        <th data='qcnt,90,R'>Quotes</th>
                    </tr>
                </table>
            </div>
        </td>
        </tr>
    </table>

    <form class='BDialog' id='dlgProsp' style='height:550px; width:700px;' title='Prospect Details'>
        <table class='form centerme'>
            <tr><th>Tax ID (EIN):</th><td><input name='eina' class='required' size='3'> &ndash; <input name='einb' class='required' size='10'></td></tr>
            <tr><th>Group Name:</th><td><input name='grpnam' class='required' size='50'></td></tr>
            <tr><th>Address:</th><td><input name='addr1' class='required' size='50'><td></td></tr>
            <tr><th></th><td><input name='addr2' size='50'><td></td></tr>
            <tr><th></th><td>
                <input name='city' placeholder='City' class='required' size='30'>
                <input name='state' placeholder='ST' class='required' size='3'>,
                <input name='zip' placeholder='Zip' class='required' size='12'>
                <td></td></tr>
            <tr><th>Contact:</th><td><input name='contact' size='50'></td></tr>
            <tr><th>Email:</th><td><input name='email' size='50'></td></tr>
            <tr><th></th><td>Ph: <input name='phone' size='15'> Fax: <input name='fax' size='15'></td></tr>
            <tr><th>Employees:</th><td><input name='empcount' size='5' class='required'></td></tr>
            <tr><th>NAICS:</th><td><input name='naics' disabled class='required' size='10'> <button class='inline' onclick='pickNAICS()'>Pick...</button></td></tr>
            <tr><td colspan='2' style='padding-top: .6em;'>
                <fieldset><legend>Other Information</legend>
                <table class='form'>
                    <tr><th>Massachusetts:</th><td>
                        <label class='chk'><input type='checkbox' name='mass'><i></i> check if compliance is required</label>
                    </td></tr>

                </table>
                </fieldset>

            </td></tr>
        </table>
        <button class='BDialogButton' onclick='popDialog()'>Close</button>
    </form>
</body>
</html>